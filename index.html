<!doctype html>
<html lang="ja">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>æ‹æ„›ã‚³ã‚¢ã‚¿ã‚¤ãƒ—è¨ºæ–­</title>
<style>
  :root{
    --pink:#fb6ea9; --teal:#1cc4b4; --line:#e5e7eb; --text:#0f172a; --muted:#6b7280;
  }
  *{box-sizing:border-box}
  body{font-family:system-ui,-apple-system,Segoe UI,Roboto,"Noto Sans JP",sans-serif;margin:0;background:#fafafa;color:var(--text)}
  .wrap{max-width:880px;margin:24px auto;padding:0 18px 40px}
  .card{background:#fff;border:1px solid var(--line);border-radius:16px;box-shadow:0 8px 26px rgba(0,0,0,.05);padding:22px}
  h1{margin:6px 0 4px;font-size:24px;text-align:center}
  .muted{color:var(--muted);font-size:12px}
  .hidden{display:none}
  /* progress */
  .progress{position:sticky;top:0;background:#fff;padding:10px 0;z-index:10}
  .bar{height:8px;border-radius:999px;background:var(--line);overflow:hidden}
  .bar>span{display:block;height:100%;width:0;background:linear-gradient(90deg,var(--pink),var(--teal));transition:width .25s ease}
  /* block */
  .q{padding:22px 0;border-bottom:1px solid var(--line)}
  .q:last-child{border-bottom:0}
  .q h3{margin:0 0 10px;font-size:20px;text-align:center}
  .ab{display:flex;justify-content:space-between;max-width:340px;margin:6px auto 0;color:var(--muted)}
  .heart-row{display:flex;gap:14px;justify-content:center;align-items:center;margin:14px 0}
  .heart{width:38px;cursor:pointer;opacity:.9;transition:transform .12s ease, opacity .12s ease}
  .heart.small{width:30px}
  .heart:hover{transform:translateY(-2px);opacity:1}
  .heart svg{display:block}
  .actions{display:flex;justify-content:space-between;align-items:center;margin-top:16px}
  button{background:#111;color:#fff;border:0;border-radius:12px;padding:12px 16px;font-weight:700;cursor:pointer}
  .pill{background:#fde68a;padding:2px 8px;border-radius:8px}
</style>
<body>
  <div class="progress">
    <div class="wrap" style="padding-bottom:0">
      <div class="muted" id="pctText">é€²æ— 0%</div>
      <div class="bar"><span id="barFill"></span></div>
    </div>
  </div>
  <div class="wrap">
    <div id="formCard" class="card">
      <h1>æ‹æ„›ã‚³ã‚¢ã‚¿ã‚¤ãƒ—è¨ºæ–­ <span class="muted">ï¼ˆå…¨7å•ãƒ»3åˆ†ï¼‰</span></h1>
      <p class="muted" style="text-align:center">ç›´æ„Ÿã§é¸ã‚“ã§ãã ã•ã„ã€‚ãƒãƒ¼ãƒˆã‚’ã‚¿ãƒƒãƒ—ã™ã‚‹ã ã‘ã€‚</p>
      <form id="quiz">
        <div id="qWrap"></div>
        <div class="actions">
          <div class="muted">è¨ºæ–­ID: <code>KM-01</code></div>
          <button type="submit">çµæœã‚’è¦‹ã‚‹</button>
        </div>
      </form>
    </div>

    <div id="resultCard" class="card hidden">
      <div class="muted">è¨ºæ–­ãƒ¬ãƒãƒ¼ãƒˆ / 2025</div>
      <h2 style="margin:10px 0 0;font-size:22px;text-align:center">ã‚ãªãŸã®ä¸­æ ¸ã‚¿ã‚¤ãƒ—ï¼š <span id="typeName" class="pill">Komeï¼ˆã“ã‚ï¼‰</span></h2>
      <p class="muted" style="margin:8px 0 14px;text-align:center">è½ã¡ç€ãã¨éŠã³å¿ƒã®ãƒãƒ©ãƒ³ã‚¹ãŒé«˜ã„â€œã‚­ãƒ¬å‘³Ã—åŒ…å®¹åŠ›â€ã€‚</p>
      <ul>
        <li>å¼·ã¿ï¼šå®Ÿå‹™ã«å¼·ãã€åˆ¤æ–­ãŒãƒ–ãƒ¬ãªã„ã€‚</li>
        <li>ç›¸æ€§ï¼šå¤§äººã®ä½™è£•ãŒã‚ã‚‹äººï¼ä»•äº‹ã‚’æœ¬æ°—ã§ã‚„ã‚‹äººã€‚</li>
        <li>æ¨ã—ãƒ‡ãƒ¼ãƒˆï¼šå¤œæ™¯ or ãƒ©ã‚¦ãƒ³ã‚¸ã§ä¹¾æ¯ â†’ æœ€è¿‘ã®å‹ã¡è©±ã‚’å…±æœ‰ã€‚</li>
      </ul>
      <p style="margin-top:12px"><b>çµè«–ï¼š</b>ã‚ãªãŸã®æœ€é©è§£ã¯ <b>Kome</b>ã€‚å®‰å¿ƒæ„Ÿã¨ãƒ‰ã‚­ãƒ‰ã‚­ãŒä¸¡ç«‹ã€‚</p>
      <button id="shareBtn" style="margin-top:14px">çµæœã‚’ã‚¹ã‚¯ã‚·ãƒ§ã—ã¦é€ã£ã¦ã­</button>
    </div>
  </div>

  <script>
    const FIXED_TYPE_NAME = 'Komeï¼ˆã“ã‚ï¼‰';
    // è³ªå•ï¼ˆA=ã€Œã¯ã„ã€, B=ã€Œã„ã„ãˆã€æƒ³å®šï¼‰
    const QUESTIONS = [
      {text:'è‡ªåˆ†ã‚ˆã‚Šå¤§äººã£ã½ã„äººãŒå¥½ãã ', A:'ã¯ã„', B:'ã„ã„ãˆ'},
      {text:'æƒšã‚Œã‚„ã™ã„æ–¹ã ', A:'ã¯ã„', B:'ã„ã„ãˆ'},
      {text:'æ‹äººãŒã„ã‚‹æ™‚ã¯ç•°æ€§ãŒã„ã‚‹å ´ã«è¡Œã‹ãªã„ã‚ˆã†ã«ã—ã¦ã„ã‚‹', A:'ã¯ã„', B:'ã„ã„ãˆ'},
      {text:'ç›¸æ‰‹ã®ãƒ†ãƒ³ãƒã«åˆã‚ã›ã‚‹ã®ãŒå¾—æ„ã ', A:'ã¯ã„', B:'ã„ã„ãˆ'},
      {text:'é€£çµ¡ã¯å®‰å®šã—ã¦ã„ã‚‹æ–¹ãŒå®‰å¿ƒã™ã‚‹', A:'ã¯ã„', B:'ã„ã„ãˆ'},
      {text:'å†—è«‡ã§ç©ºæ°—ã‚’å’Œã¾ã›ã‚‹ã®ãŒå¾—æ„', A:'ã¯ã„', B:'ã„ã„ãˆ'},
      {text:'ä¾¡å€¤è¦³ï¼ˆãŠé‡‘ãƒ»ç”Ÿæ´»ãƒ»é€Ÿåº¦ï¼‰ãŒåˆã†ã®ãŒä¸€ç•ªå¤§äº‹', A:'ã¯ã„', B:'ã„ã„ãˆ'},
    ];

    const form = document.getElementById('quiz');
    const qWrap = document.getElementById('qWrap');
    const resultCard = document.getElementById('resultCard');
    const formCard = document.getElementById('formCard');
    const typeName = document.getElementById('typeName');
    const shareBtn = document.getElementById('shareBtn');
    const barFill = document.getElementById('barFill');
    const pctText = document.getElementById('pctText');

    // ãƒãƒ¼ãƒˆSVGï¼ˆè‰²ã¯å·¦å³ã§å›ºå®šï¼‰
    const heartSVG = (color) => `<?xml version="1.0"?><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path fill="none" stroke="${color}" stroke-width="2" d="M12 21s-6.7-4.6-9.2-8.1C1 10.2 1.5 7.2 3.7 5.8 5.8 4.3 8.5 4.9 10 6.9c1.5-2 4.2-2.6 6.3-1.1 2.2 1.4 2.7 4.4.9 7.1C18.7 16.3 12 21 12 21z"/></svg>`;

    const answers = new Array(QUESTIONS.length).fill(null);

    const renderQ = () => {
      qWrap.innerHTML = '';
      QUESTIONS.forEach((q,i)=>{
        const blk = document.createElement('div'); blk.className='q';
        const h = document.createElement('h3'); h.textContent = q.text; blk.appendChild(h);

        const row = document.createElement('div'); row.className='heart-row';
        // 5æ®µéšï¼ˆå·¦2=ãƒ”ãƒ³ã‚¯, ä¸­1=å°ã•ã‚ã‚°ãƒ¬ãƒ¼, å³2=ãƒ†ã‚£ãƒ¼ãƒ«ï¼‰
        const palette = ['var(--pink)','var(--pink)','var(--muted)','var(--teal)','var(--teal)'];
        for(let j=0;j<5;j++){
          const span = document.createElement('span');
          span.className = 'heart'+(j===2?' small':'');
          span.innerHTML = heartSVG(palette[j]);
          span.setAttribute('role','radio');
          span.setAttribute('aria-checked', answers[i]===j ? 'true':'false');
          span.addEventListener('click',()=>{ answers[i]=j; updateProgress(); highlight(i); });
          row.appendChild(span);
        }
        blk.appendChild(row);

        const ab = document.createElement('div'); ab.className='ab';
        const a = document.createElement('div'); a.textContent = `A. ${q.A}`;
        const b = document.createElement('div'); b.textContent = `B. ${q.B}`;
        ab.appendChild(a); ab.appendChild(b); blk.appendChild(ab);

        qWrap.appendChild(blk);
      });
    };

    function highlight(idx){
      // é¸æŠä¸­ã®ãƒãƒ¼ãƒˆã‚’å°‘ã—å¤§ãã
      const blocks = qWrap.querySelectorAll('.q');
      const block = blocks[idx];
      const hearts = block.querySelectorAll('.heart');
      hearts.forEach((h,k)=>{ h.style.transform = (answers[idx]===k)?'scale(1.1)':'none'; h.style.opacity = (answers[idx]===k)?'1':'.9'; });
    }

    function updateProgress(){
      const done = answers.filter(v=>v!==null).length;
      const pct = Math.round(done/answers.length*100);
      barFill.style.width = pct+'%';
      pctText.textContent = `é€²æ— ${pct}%`;
    }

    renderQ();
    updateProgress();

    form.addEventListener('submit', (e)=>{
      e.preventDefault();
      typeName.textContent = FIXED_TYPE_NAME; // ã©ã®å›ç­”ã§ã‚‚å›ºå®š
      formCard.classList.add('hidden');
      resultCard.classList.remove('hidden');
      window.scrollTo({top:0,behavior:'smooth'});
    });

    shareBtn.addEventListener('click', async ()=>{
      const text='è¨ºæ–­çµ‚ã‚ã£ãŸã‚ˆï¼çµæœï¼šKomeï¼ˆã“ã‚ï¼‰
ã‚¹ã‚¯ã‚·ãƒ§é€ã‚‹ã­ğŸ“¸';
      try{ await navigator.clipboard.writeText(text); shareBtn.textContent='ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸã€‚ã‚¹ã‚¯ã‚·ãƒ§ãŠé¡˜ã„ï¼'; setTimeout(()=>shareBtn.textContent='çµæœã‚’ã‚¹ã‚¯ã‚·ãƒ§ã—ã¦é€ã£ã¦ã­',2000);}catch{ alert('çµæœç”»é¢ã‚’ã‚¹ã‚¯ã‚·ãƒ§ã—ã¦é€ã£ã¦ã­ï¼'); }
    });
  </script>
</body>
</html>
