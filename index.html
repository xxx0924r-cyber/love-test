<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>æ‹æ„›ã‚³ã‚¢ã‚¿ã‚¤ãƒ—è¨ºæ–­</title>
  <style>
    :root{--pink:#fb6ea9;--teal:#22c3b9;--line:#e5e7eb;--text:#0f172a;--muted:#6b7280;}
    *{box-sizing:border-box}
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,"Noto Sans JP",sans-serif;margin:0;background:#fafafa;color:var(--text)}
    .wrap{max-width:880px;margin:24px auto;padding:0 18px 40px}
    .card{background:#fff;border:1px solid var(--line);border-radius:16px;box-shadow:0 8px 26px rgba(0,0,0,.05);padding:22px}
    h1{margin:6px 0 4px;font-size:24px;text-align:center}
    .muted{color:var(--muted);font-size:12px}
    .hidden{display:none}
    /* progress */
    .progress{position:sticky;top:0;background:#fff;padding:10px 0;z-index:10;border-bottom:1px solid var(--line)}
    .bar{height:8px;border-radius:999px;background:var(--line);overflow:hidden}
    .bar>span{display:block;height:100%;width:0;background:linear-gradient(90deg,var(--pink),var(--teal));transition:width .25s ease}
    /* questions */
    .q{padding:22px 0;border-bottom:1px solid var(--line)}
    .q:last-child{border-bottom:0}
    .q h3{margin:0 0 10px;font-size:20px;text-align:center}
    .heart-row{display:flex;gap:14px;justify-content:center;align-items:center;margin:14px 0}
    .heart{width:38px;cursor:pointer;opacity:.9;transition:transform .12s ease, opacity .12s ease}
    /* ãƒãƒ¼ãƒˆé¸æŠæ™‚ã®ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ */
input[type="radio"]:checked + svg {
  fill: var(--pink);
  transform: scale(1.2);
  opacity: 1;
  transition: all 0.2s ease;
}

/* æœªé¸æŠã®ãƒãƒ¼ãƒˆã¯è–„ã */
.heart svg {
  opacity: 0.4;
  transition: all 0.2s ease;
}

/* ãƒ›ãƒãƒ¼æ™‚ã«ãµã‚ã£ã¨å¼·èª¿ */
.heart:hover svg {
  opacity: 0.8;
  transform: scale(1.1);
}

    .heart.small{width:30px}
    .heart:hover{transform:translateY(-2px);opacity:1}
    .actions{display:flex;justify-content:space-between;align-items:center;margin-top:16px}
    button{background:#111;color:#fff;border:0;border-radius:12px;padding:12px 16px;font-weight:700;cursor:pointer}
    /* result */
    .result-title{font-size:22px;text-align:center;margin:6px 0 12px}
    .tag{display:inline-block;background:#fde68a;border-radius:10px;padding:4px 10px;margin:4px 0}
    .result-box{border:1px solid var(--line);border-radius:14px;padding:16px;background:#fff}
    .center{ text-align:center }
  </style>
</head>
<body>
  <!-- progress -->
  <div class="progress">
    <div class="wrap" style="padding-bottom:0">
      <div class="muted" id="pctText">é€²æ— 0%</div>
      <div class="bar"><span id="barFill"></span></div>
    </div>
  </div>

  <div class="wrap">
    <!-- è³ªå•ã‚«ãƒ¼ãƒ‰ -->
    <section id="formCard" class="card">
      <h1>æ‹æ„›ã‚³ã‚¢ã‚¿ã‚¤ãƒ—è¨ºæ–­ <span class="muted">ï¼ˆå…¨7å•ãƒ»3åˆ†ï¼‰</span></h1>
      <p class="muted center">ç›´æ„Ÿã§é¸ã‚“ã§ãã ã•ã„ã€‚ãƒãƒ¼ãƒˆã‚’ã‚¿ãƒƒãƒ—ã™ã‚‹ã ã‘ã€‚</p>
      <form id="quiz">
        <div id="qWrap"></div>
        <div class="actions">
          <div class="muted">è¨ºæ–­ID: <code>KM-01</code></div>
          <button type="submit">çµæœã‚’è¦‹ã‚‹</button>
        </div>
      </form>
    </section>

    <!-- çµæœã‚«ãƒ¼ãƒ‰ï¼ˆæœ€åˆã¯éè¡¨ç¤ºï¼‰ -->
    <section id="resultCard" class="card hidden">
      <div class="muted">è¨ºæ–­ãƒ¬ãƒãƒ¼ãƒˆ / 2025</div>
      <h2 class="result-title">ã‚ãªãŸã®å°†æ¥ã®å¥¥ã•ã‚“ã¨ã—ã¦ã´ã£ãŸã‚Šãªã®ã¯ãƒ»ãƒ»ãƒ»</h2>
      <div class="center"><span class="tag">ç²è¯ï¼</span></div>

      <div class="result-box" style="margin-top:12px">
        <ul style="margin:0;padding-left:18px;line-height:1.9">
          <li>æ„›æƒ…æ·±ãã¦ã„ã¤ã‚‚happy</li>
          <li>ã‹ã¾ã£ã¦ã‚ã’ãªã„ã¨ãŸã¾ã«çˆ†ç™ºãƒ»ãƒ»ãƒ»ï¼Ÿ</li>
          <li>æ„›ã§ã¦ã‚ã’ã‚‹ã¨åˆ†ã‹ã‚Šã‚„ã™ãä¸Šæ©Ÿå«Œ</li>
          <li>ã‚Šã‚…ã†ãã‚“ã®ã“ã¨ãŒã‚„ã‘ã«å¥½ã</li>
        </ul>
      </div>

      <p class="center" style="margin-top:14px;font-weight:700">ã‚³ãƒ¼ãƒ«ãƒãƒ³ ç²è¯<br>ã©ã†ï¼Ÿï¼Ÿ</p>

      <img src="IMG_5863.jpg" alt="è¨ºæ–­çµæœã®ç”»åƒ" style="width:100%;border-radius:14px;margin:20px 0;">

      <div class="center" style="margin-top:10px">
        <button id="shareBtn">çµæœã‚’ã‚·ã‚§ã‚¢</button>
        <button id="againBtn" style="margin-left:8px;background:#555">ã‚‚ã†ä¸€åº¦ã‚„ã‚‹</button>
      </div>
    </section>
  </div>

  <script>
    // å›ºå®šçµæœï¼ˆã©ã®å›ç­”ã§ã‚‚åŒã˜çµæœç”»é¢ã«é·ç§»ï¼‰
    const QUESTIONS = [
      {text:'æ†§ã‚Œã‚„ã™ã„æ–¹ã '},
      {text:'æ‹äººãŒã„ã‚‹æ™‚ã¯ç•°æ€§ãŒã„ã‚‹å ´ã«è¡Œã‹ãªã„ã‚ˆã†ã«ã—ã¦ã„ã‚‹'},
      {text:'ç›¸æ‰‹ã®ãƒ†ãƒ³ãƒã«åˆã‚ã›ã‚‹ã®ãŒå¾—æ„ã '},
      {text:'é€£çµ¡ã¯å®‰å®šã—ã¦ã„ã‚‹æ–¹ãŒå®‰å¿ƒã™ã‚‹'},
      {text:'å†—è«‡ã§æ„›æƒ…ã‚’ä¼ãˆã‚‹ã®ãŒå¾—æ„'},
      {text:'ä¾¡å€¤è¦³ï¼ˆé‡‘ãƒ»ç”Ÿæ´»ãƒ»é€Ÿåº¦ï¼‰ãŒåˆã†ã®ãŒä¸€ç•ªå¤§äº‹'},
      {text:'å¤§äººã£ã½ã„ä½™è£•ã«æƒ¹ã‹ã‚Œã‚‹'}
    ];

    const form = document.getElementById('quiz');
    const qWrap = document.getElementById('qWrap');
    const formCard = document.getElementById('formCard');
    const resultCard = document.getElementById('resultCard');
    const shareBtn = document.getElementById('shareBtn');
    const againBtn = document.getElementById('againBtn');
    const barFill = document.getElementById('barFill');
    const pctText = document.getElementById('pctText');

    // ãƒãƒ¼ãƒˆSVG
    const heart = (color) => `<?xml version="1.0"?>
      <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
        <path fill="none" stroke="${color}" stroke-width="2"
              d="M12 21s-6.7-4.6-9.2-8.1C1 10.2 1.5 7.2 3.7 5.8 5.8 4.3 8.5 4.9 10 6.9c1.5-2 4.2-2.6 6.3-1.1 2.2 1.4 2.7 4.4.9 7.1C18.7 16.3 12 21 12 21z"/>
      </svg>`;

    const answers = new Array(QUESTIONS.length).fill(null);

    const render = () => {
      qWrap.innerHTML = '';
      QUESTIONS.forEach((q,i)=>{
        const blk = document.createElement('div'); blk.className='q';
        const h = document.createElement('h3'); h.textContent = q.text; blk.appendChild(h);

        const row = document.createElement('div'); row.className='heart-row';
        const palette = ['var(--pink)','var(--pink)','var(--muted)','var(--teal)','var(--teal)'];
        for(let j=0;j<5;j++){
          const span = document.createElement('span');
          span.className = 'heart'+(j===2?' small':'');
          span.innerHTML = heart(getComputedStyle(document.documentElement).getPropertyValue(palette[j].replace('var(','').replace(')','')).trim() || palette[j]);
          span.addEventListener('click',()=>{ answers[i]=j; updateProgress(); highlight(i); });
          row.appendChild(span);
        }
        blk.appendChild(row);
        qWrap.appendChild(blk);
      });
    };

    function highlight(idx){
      const block = qWrap.querySelectorAll('.q')[idx];
      const hearts = block.querySelectorAll('.heart');
      hearts.forEach((h,k)=>{ h.style.transform = (answers[idx]===k)?'scale(1.1)':'none'; h.style.opacity = (answers[idx]===k)?'1':'.9'; });
    }

    function updateProgress(){
      const done = answers.filter(v=>v!==null).length;
      const pct = Math.round(done/answers.length*100);
      barFill.style.width = pct+'%';
      pctText.textContent = `é€²æ— ${pct}%`;
    }

    render(); updateProgress();

    // é€ä¿¡ã§ç”»é¢ã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹
    form.addEventListener('submit',(e)=>{
      e.preventDefault();
      formCard.classList.add('hidden');        // è¨­å•ã‚«ãƒ¼ãƒ‰ã‚’éš ã™
      resultCard.classList.remove('hidden');   // çµæœã‚«ãƒ¼ãƒ‰ã‚’è¡¨ç¤º
      window.scrollTo({top:0,behavior:'smooth'});
    });

    // ã‚·ã‚§ã‚¢ï¼ˆãƒ¡ãƒƒã‚»æ–‡ã‚³ãƒ”ãƒ¼ï¼‰
    shareBtn.addEventListener('click', async ()=>{
      const text = 'è¨ºæ–­çµ‚ã‚ã£ãŸã‚ˆï¼\\nå°†æ¥ã®å¥¥ã•ã‚“ã¯ã€Œç²è¯ã€ã‚‰ã—ã„ğŸ¤£';
      try{
        await navigator.clipboard.writeText(text);
        shareBtn.textContent = 'ã‚³ãƒ”ãƒ¼ã—ãŸã‚ˆï¼ˆã‚¹ã‚¯ã‚·ãƒ§ã‚‚é€ã£ã¦ï¼ï¼‰';
        setTimeout(()=> shareBtn.textContent='çµæœã‚’ã‚·ã‚§ã‚¢', 2200);
      }catch{
        alert('çµæœç”»é¢ã‚’ã‚¹ã‚¯ã‚·ãƒ§ã—ã¦é€ã£ã¦ã­ï¼');
      }
    });

    // ã‚‚ã†ä¸€åº¦ã‚„ã‚‹
    againBtn.addEventListener('click', ()=>{
      answers.fill(null);
      render(); updateProgress();
      resultCard.classList.add('hidden');
      formCard.classList.remove('hidden');
      window.scrollTo({top:0,behavior:'smooth'});
    });
  </script>
</body>
</html>
